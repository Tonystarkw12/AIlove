<template>
  <view class="settings-container" :data-theme="isDark ? 'dark' : 'light'">
    <!-- è®¾ç½®é¡µé¢å¡ç‰‡ -->
    <view class="settings-card pokemon-card">
      <!-- æ ‡é¢˜ -->
      <view class="header">
        <text class="page-title">âš™ï¸ è®¾ç½®</text>
        <view class="divider"></view>
      </view>

      <!-- ä¸»é¢˜åˆ‡æ¢ -->
      <view class="setting-item">
        <view class="setting-info">
          <text class="setting-icon">ğŸŒ“</text>
          <view class="setting-text">
            <text class="setting-label">æ˜æš—ä¸»é¢˜</text>
            <text class="setting-desc">{{ isDark ? 'æš—è‰²æ¨¡å¼' : 'äº®è‰²æ¨¡å¼' }}</text>
          </view>
        </view>
        <view class="theme-toggle-btn" @tap="toggleTheme">
          <text class="theme-icon theme-icon-light">â˜€ï¸</text>
          <text class="theme-icon theme-icon-dark">ğŸŒ™</text>
        </view>
      </view>

      <!-- å…¶ä»–è®¾ç½®é¡¹ï¼ˆå ä½ï¼‰ -->
      <view class="setting-item">
        <view class="setting-info">
          <text class="setting-icon">ğŸ””</text>
          <view class="setting-text">
            <text class="setting-label">æ¶ˆæ¯é€šçŸ¥</text>
            <text class="setting-desc">ç®¡ç†æ¨é€é€šçŸ¥è®¾ç½®</text>
          </view>
        </view>
        <text class="setting-arrow">â†’</text>
      </view>

      <view class="setting-item">
        <view class="setting-info">
          <text class="setting-icon">ğŸ”’</text>
          <view class="setting-text">
            <text class="setting-label">éšç§è®¾ç½®</text>
            <text class="setting-desc">ç®¡ç†ä¸ªäººéšç§é€‰é¡¹</text>
          </view>
        </view>
        <text class="setting-arrow">â†’</text>
      </view>

      <view class="setting-item">
        <view class="setting-info">
          <text class="setting-icon">ğŸ“±</text>
          <view class="setting-text">
            <text class="setting-label">å…³äºæˆ‘ä»¬</text>
            <text class="setting-desc">ç‰ˆæœ¬ä¿¡æ¯å’Œä½¿ç”¨æ¡æ¬¾</text>
          </view>
        </view>
        <text class="setting-arrow">â†’</text>
      </view>

      <!-- è¿”å›æŒ‰é’® -->
      <view class="back-section">
        <gameboy-button
          text="è¿”å›"
          type="secondary"
          size="medium"
          @tap="goBack"
        />
      </view>
    </view>
  </view>
</template>

<script setup>
import { ref, onMounted } from 'vue';
import { useTheme } from '@/composables/useTheme';

const { isDark, toggleTheme } = useTheme();

onMounted(() => {
  // åº”ç”¨å½“å‰ä¸»é¢˜åˆ°é¡µé¢
  applyTheme();
});

function applyTheme() {
  const theme = isDark.value ? 'dark' : 'light';
  // é¡µé¢ä¼šè‡ªåŠ¨é€šè¿‡ :data-theme ç»‘å®šæ›´æ–°
}

function goBack() {
  uni.navigateBack();
}
</script>

<style scoped>
.settings-container {
  min-height: 100vh;
  background: linear-gradient(180deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);
  padding: 40rpx 30rpx;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.settings-card {
  width: 100%;
  max-width: 600rpx;
  margin: 0 auto;
  padding: 60rpx 40rpx;
  background: var(--color-bg-card);
  backdrop-filter: blur(10px);
  border: 4px solid var(--color-border);
  border-radius: 20rpx;
  box-shadow: 8px 8px 0px 0px var(--color-shadow-hard);
}

/* æ ‡é¢˜åŒºåŸŸ */
.header {
  margin-bottom: 50rpx;
  text-align: center;
}

.page-title {
  font-size: 48rpx;
  font-weight: bold;
  color: var(--color-text-primary);
  font-family: 'Varela Round', 'Nunito', sans-serif;
  display: block;
  margin-bottom: 20rpx;
}

.divider {
  width: 100%;
  height: 4px;
  background: var(--color-border);
  border-radius: 2rpx;
}

/* è®¾ç½®é¡¹ */
.setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 30rpx 20rpx;
  margin-bottom: 20rpx;
  background: var(--color-bg-input);
  border: 3px solid var(--color-border);
  border-radius: 16rpx;
  box-shadow: 3px 3px 0px 0px var(--color-shadow-hard);
}

.setting-info {
  display: flex;
  align-items: center;
  flex: 1;
}

.setting-icon {
  font-size: 48rpx;
  margin-right: 24rpx;
  width: 60rpx;
  text-align: center;
}

.setting-text {
  display: flex;
  flex-direction: column;
}

.setting-label {
  font-size: 32rpx;
  font-weight: bold;
  color: var(--color-text-primary);
  margin-bottom: 8rpx;
  font-family: 'Varela Round', 'Nunito', sans-serif;
}

.setting-desc {
  font-size: 24rpx;
  color: var(--color-text-secondary);
  font-family: 'Varela Round', 'Nunito', sans-serif;
}

.setting-arrow {
  font-size: 36rpx;
  color: var(--color-text-secondary);
  font-weight: bold;
}

/* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
.theme-toggle-btn {
  position: relative;
  width: 120rpx;
  height: 60rpx;
  background: var(--color-bg-card);
  border: 3px solid var(--color-border);
  border-radius: 30rpx;
  box-shadow: 3px 3px 0px 0px var(--color-shadow-hard);
  display: flex;
  align-items: center;
  padding: 4rpx;
  box-sizing: border-box;
  transition: all 0.3s ease;
}

.theme-toggle-btn::before {
  content: '';
  position: absolute;
  width: 48rpx;
  height: 48rpx;
  background: var(--color-primary);
  border-radius: 50%;
  left: 4rpx;
  transition: all 0.3s ease;
  box-shadow: 2px 2px 0px 0px var(--color-shadow-hard);
}

[data-theme="dark"] .theme-toggle-btn::before {
  left: calc(100% - 52rpx);
  background: var(--color-info);
}

.theme-icon {
  width: 40rpx;
  height: 40rpx;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28rpx;
  z-index: 1;
}

.theme-icon-light {
  left: 8rpx;
}

.theme-icon-dark {
  right: 8rpx;
}

/* è¿”å›æŒ‰é’®åŒºåŸŸ */
.back-section {
  margin-top: 50rpx;
  display: flex;
  justify-content: center;
}
</style>
